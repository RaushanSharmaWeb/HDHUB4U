<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Download - HDHub4u Clone</title>
    <style>
        /* --- ORIGINAL SIMPLE CSS --- */
        body {
            font-family: sans-serif;
            background-color: #111; /* Dark Black Background */
            color: #fff;
            margin: 0;
            padding: 0;
        }

        /* Simple Header */
        header {
            background-color: #222;
            padding: 15px;
            border-bottom: 2px solid #e50914;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            color: #e50914;
            font-size: 24px;
            font-weight: bold;
            text-decoration: none;
        }

        .home-btn {
            background: #333;
            color: white;
            padding: 8px 12px;
            text-decoration: none;
            border-radius: 4px;
            font-size: 14px;
        }

        /* Container */
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 15px;
            background: #1a1a1a; /* Thoda sa light black card */
            border-radius: 5px;
        }

        /* Movie Layout */
        .movie-header {
            display: flex;
            gap: 20px;
            flex-wrap: wrap; /* Mobile friendly */
        }

        .poster img {
            width: 200px;
            height: 300px;
            object-fit: cover;
            border-radius: 5px;
            border: 1px solid #333;
        }

        .movie-info {
            flex: 1;
            min-width: 250px;
        }

        h1 {
            color: #e50914;
            margin-top: 0;
            font-size: 24px;
        }

        .meta p {
            margin: 5px 0;
            color: #ccc;
            font-size: 14px;
        }

        .plot-box {
            margin-top: 20px;
            padding: 10px;
            background: #222;
            border-left: 3px solid #e50914;
            color: #ddd;
            font-size: 14px;
            line-height: 1.5;
        }

        /* Download Section */
        .download-section {
            margin-top: 30px;
            border-top: 1px solid #333;
            padding-top: 20px;
        }

        h3 { color: white; border-bottom: 1px solid #333; padding-bottom: 10px; }

        .dl-btn {
            display: block;
            background-color: #e50914;
            color: white;
            padding: 12px;
            margin-bottom: 10px;
            text-align: center;
            text-decoration: none;
            font-weight: bold;
            border-radius: 4px;
            transition: background 0.3s;
        }

        .dl-btn:hover {
            background-color: #b2070f;
        }

        /* Mobile Fix */
        @media (max-width: 600px) {
            .poster img { width: 100%; height: auto; }
            .movie-header { flex-direction: column; }
        }

        /* Loader */
        #loader { text-align: center; padding: 50px; color: #777; }
    </style>
</head>
<body>

    <header>
        <a href="index.html" class="logo">HDHub4u</a>
        <a href="index.html" class="home-btn">üè† Home</a>
    </header>

    <div id="loader">Loading Movie Details... ‚è≥</div>

    <div class="container" id="content" style="display: none;">
        
        <div class="movie-header">
            <div class="poster">
                <img id="poster-img" src="" alt="Poster">
            </div>
            <div class="movie-info">
                <h1 id="title">Loading...</h1>
                <div class="meta">
                    <p><strong>Quality:</strong> <span id="quality">HD</span></p>
                    <p><strong>Language:</strong> <span id="language">Hindi</span></p>
                    <p><strong>Size:</strong> <span id="size">N/A</span></p>
                    <p><strong>Category:</strong> <span id="category">Bollywood</span></p>
                    <p><strong>Rating:</strong> ‚≠ê <span id="rating">N/A</span></p>
                </div>
            </div>
        </div>

        <div class="plot-box">
            <strong>Synopsis:</strong> <span id="plot">Loading...</span>
        </div>

        <div class="download-section">
            <h3>Download Links</h3>
            <div id="links-container">
                </div>
        </div>

    </div>

    <script>
        // 1. URL se ID nikalo (?id=xyz)
        const urlParams = new URLSearchParams(window.location.search);
        const movieId = urlParams.get('id');

        // üî• Aapka Firebase URL
        const FIREBASE_URL = "https://education-921c2-default-rtdb.firebaseio.com";

        async function loadMovie() {
            const loader = document.getElementById('loader');
            const content = document.getElementById('content');

            if (!movieId) {
                loader.innerHTML = "<h2 style='color:red'>‚ùå Error: No Movie ID Found!</h2>";
                return;
            }

            try {
                // üî• FAST FETCH: Sirf 1 Movie ka data maango
                const response = await fetch(`${FIREBASE_URL}/movies/${movieId}.json`);
                const movie = await response.json();

                if (!movie) {
                    loader.innerHTML = "<h2 style='color:red'>‚ö†Ô∏è Movie Not Found!</h2>";
                    return;
                }

                // --- DATA DISPLAY ---
                document.getElementById('title').innerText = movie.title;
                document.getElementById('poster-img').src = movie.poster || "https://via.placeholder.com/200x300";
                document.getElementById('plot').innerText = movie.plot || "No description available.";

                // Metadata
                document.getElementById('quality').innerText = movie.quality || "HD";
                document.getElementById('language').innerText = movie.language || "Hindi";
                document.getElementById('size').innerText = movie.size || "N/A";
                document.getElementById('category').innerText = movie.category || "General";
                document.getElementById('rating').innerText = movie.rating || "N/A";

                // Links Logic
                const linksBox = document.getElementById('links-container');
                linksBox.innerHTML = ""; // Clear old links

                if (movie.links && movie.links.length > 0) {
                    movie.links.forEach(link => {
                        const btn = document.createElement('a');
                        btn.href = link.url;
                        btn.className = "dl-btn";
                        btn.target = "_blank";
                        btn.innerHTML = `‚¨áÔ∏è Download ${link.name}`;
                        linksBox.appendChild(btn);
                    });
                } else {
                    linksBox.innerHTML = "<p style='color:orange'>Links coming soon...</p>";
                }

                // Show Content
                loader.style.display = 'none';
                content.style.display = 'block';

            } catch (error) {
                console.error(error);
                loader.innerHTML = "<h2 style='color:red'>Server Error!</h2>";
            }
        }

        // Run immediately
        loadMovie();
    </script>

</body>
</html>
